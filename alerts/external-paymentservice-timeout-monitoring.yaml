kind: sentry.metric_alert
flow: service_analysis_agent
name: External PaymentService timeout monitoring
dataset: events
aggregate: count()
query: event.type:transaction transaction:"PaymentService external calls" environment:production
timeWindow: 15
thresholdType: above
environment: production
thresholds:
  warning: 1
  critical: 5
justification: 'Codebase analysis reveals ''Missing timeout configuration for external
  API calls'' on PaymentService (Stripe). Production data shows ''TimeoutError: Inventory
  database timeout'' and payment token errors. External API calls without timeout
  protection cause request hangs and resource exhaustion. Must set explicit timeout
  alerts for Stripe API integration.'
severity: WARNING
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
