kind: sentry.metric_alert
flow: service_analysis_agent
name: Orders endpoint high failure rate with payment errors
dataset: events
aggregate: failure_rate()
query: event.type:transaction transaction:"/api/orders" environment:production
timeWindow: 10
thresholdType: above
environment: production
thresholds:
  warning: 5.0
  critical: 20.0
justification: Production shows /api/orders with 38.2% failure rate (21 'payment_method'
  KeyError failures out of 55 transactions). This indicates data validation issues
  in order processing. Combined with OrderService database operations, missing error
  handling creates cascading failures.
severity: CRITICAL
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
