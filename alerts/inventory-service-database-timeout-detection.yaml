kind: sentry.metric_alert
flow: service_analysis_agent
name: Inventory service database timeout detection
dataset: events
aggregate: count()
query: event.type:transaction transaction:"/api/inventory/{sku}" environment:production
timeWindow: 15
thresholdType: above
environment: production
thresholds:
  warning: 2
  critical: 5
justification: 'Production shows ''TimeoutError: Inventory database timeout'' error
  and /api/inventory/{sku} has 2.5% failure rate. Codebase shows OrderService uses
  PostgreSQL without timeout protection. Database timeouts cascade to payment failures.
  Need proactive timeout alerting.'
severity: WARNING
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
