kind: sentry.metric_alert
flow: service_analysis_agent
name: Checkout latency spike - P95 > 1 second
dataset: events
aggregate: percentile_p95_duration()
query: event.type:transaction transaction:"/checkout" environment:production
timeWindow: 10
thresholdType: above
environment: production
thresholds:
  warning: 500
  critical: 1000
justification: Production metrics show /checkout P95 latency at 1159ms, 7x higher
  than healthy baseline (~160ms average). Given codebase shows missing timeout configuration
  for external API calls, this indicates potential PaymentService timeouts or network
  issues. Must detect latency degradation to prevent cascading failures.
severity: WARNING
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
