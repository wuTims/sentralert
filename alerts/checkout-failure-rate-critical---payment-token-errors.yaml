kind: sentry.metric_alert
flow: service_analysis_agent
name: Checkout failure rate critical - payment token errors
dataset: events
aggregate: failure_rate()
query: event.type:transaction transaction:"/checkout" environment:production
timeWindow: 5
thresholdType: above
environment: production
thresholds:
  warning: 10.0
  critical: 25.0
justification: Production data shows 37.2% failure rate (242 transactions) with 90
  errors due to 'payment token missing'. Codebase indicates no error handling on payment
  processing. This is a revenue-impacting endpoint requiring immediate attention.
severity: CRITICAL
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
