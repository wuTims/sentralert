kind: sentry.metric_alert
flow: service_analysis_agent
name: Payment token validation errors spike
dataset: events
aggregate: count()
query: event.type:transaction transaction:"Checkout payment token validation" environment:production
timeWindow: 10
thresholdType: above
environment: production
thresholds:
  warning: 10
  critical: 25
justification: 'Production data shows 90 instances of ''ValueError: Checkout failed:
  payment token missing'' errors - the dominant failure mode. This indicates client-side
  validation or API contract issues. Must alert on validation error spikes to catch
  configuration or deployment issues early.'
severity: WARNING
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
