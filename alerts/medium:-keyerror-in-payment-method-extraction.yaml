kind: sentry.metric_alert
flow: service_analysis_agent
name: 'Medium: KeyError in payment method extraction'
dataset: events
aggregate: 'error_count(''KeyError: payment_method'')'
query: event.type:transaction transaction:"/api/orders" environment:production
timeWindow: 10
thresholdType: above
environment: production
thresholds:
  warning: 5
  critical: 20
justification: Production data shows 21 KeyError exceptions for 'payment_method' across
  order-related operations. Indicates missing required field in request/response handling
  or incomplete data validation.
severity: HIGH
actions:
- type: email
  targetType: specific
  targetIdentifier: team@example.com
proposed_by: service_analysis_agent
